# PageSpeed / Hosting Notes

## Fixes applied in code

- **Link without discernible name:** Header logo link now has `aria-label="Home"` and logo image has `alt={siteConfig.name}`.
- **Image delivery:** Hero carousel, category grid, and product cards no longer use `unoptimized` for `/uploads/` images where they are displayed as thumbnails. Next.js Image Optimization will resize them (via `/_next/image?url=...`). Ensure your host serves the `/uploads/*` rewrite so the optimizer can fetch originals.
- **Cache:** The uploads API route already sends `Cache-Control: public, max-age=31536000, immutable`. If your CDN (e.g. Cloudflare) still shows a short TTL, configure it to **respect origin cache headers** or set a long cache for `/api/uploads/*` and `/_next/image*`.

## Fixes to do in your host (e.g. Cloudflare)

### robots.txt "Content-Signal" error

PageSpeed reports: **Unknown directive `Content-Signal: search=yes,ai-train=no`**.

This directive is **not** generated by the app. The app’s `robots.ts` only outputs standard fields (User-Agent, Allow, Disallow, Sitemap, Host). The extra line is usually added by:

- **Cloudflare** (e.g. Scrape Shield or a Transform Rule), or  
- Another proxy/CDN in front of the app.

**What to do:**

1. In **Cloudflare Dashboard** → **Scrape Shield** (or **Rules** / **Transform Rules**), check for any rule that modifies `robots.txt` or adds headers/lines to responses.
2. Disable or edit that rule so it does **not** append `Content-Signal` (or any non-standard directive) to `robots.txt`.
3. If you use a **custom robots.txt** in Cloudflare, remove the `Content-Signal` line and keep only standard directives.

After that, re-run PageSpeed; the robots.txt validation error should go away.

### Render-blocking and email-decode.min.js

If PageSpeed flags **cloudflare-static/email-decode.min.js** as render-blocking, that script is injected by **Cloudflare** (e.g. Email Address Obfuscation). To improve LCP you can:

- Turn off Email Address Obfuscation in Cloudflare, or  
- Keep it and accept the small cost; the app itself does not request this script.

### Legacy JavaScript (polyfills)

Warnings about `Array.prototype.at`, `Object.hasOwn`, etc. come from bundled code (e.g. Next.js / dependencies). To reduce polyfills you can narrow supported browsers (e.g. in `package.json` or `.browserslistrc`) at the cost of older browser support. Optional.
